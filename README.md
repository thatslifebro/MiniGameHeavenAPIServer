# 미니게임천국 API 서버


# TODO-LIST

완료한 작업 : ✅

- **하이브 서버 기능**
 
| 기능                                         | 완료 여부 |
| -------------------------------------------- | --------- |
| 하이브 계정생성   						| ✅        |
| [하이브 로그인]							| ✅        |
| [토큰 검증]								 | ✅        |

- **계정 기능**

| 기능                                         | 완료 여부 |
| -------------------------------------------- | --------- |
| [로그인]						              | ⬜        |
| [로그아웃]								       | ⬜        |
| [유저 등록] - 데이터 정의 이후 개발 예정 		 | ⬜        |
| [게임 데이터 로드]	- 데이터 정의 이후 개발 예정		 | ⬜        |

- **친구 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [친구 목록 조회]								  | ⬜        |
| [친구 정보 조회]								  | ⬜        |
| [친구 요청]								  | ⬜        |
| [친구 요청 조회]								  | ⬜        |
| [친구 요청 수락]								  | ⬜        |
| [친구 요청 거절]								  | ⬜        |
| [친구 삭제]								  | ⬜        |

- **출석 기능**

| 기능                              | 완료 여부 |
| --------------------------------- | --------- |
| [출석 정보 조회]					| ⬜        |
| [출석 체크]						| ⬜        |


- **캐릭터 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [캐릭터 조회]								  | ⬜        |
| [캐릭터 상세 조회]						      | ⬜        |
| [코스튬 조회]								  | ⬜        |
| [캐릭터 코스튬 변경]								  | ⬜        |
| [캐릭터 스킨 변경]						      | ⬜        |

- **게임 기능**
 
| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [보유 게임 조회]								  | ⬜        |
| [게임별 정보 조회]					          | ⬜        |
| [게임 결과 저장]								  | ⬜        |
| [전체 랭킹 조회]								  | ⬜        |
| [게임 잠금 해제]								  | ⬜        |

- **우편 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [우편함 조회]										| ⬜        |
| [우편 아이템 수령]								 | ⬜        |
| 우편 삭제                                       | ⬜        |

- **배틀 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [메달 배틀 정보 조회]					  | ⬜        |
| [메달 배틀 리그 랭킹]								  | ⬜        |
| [메달 배틀 전체 랭킹]								  | ⬜        |
| [클랜 배틀 정보 조회]							  | ⬜        |
| [클랜 배틀 랭킹]								  | ⬜        |
| [팀 배틀 정보 조회]					  | ⬜        |


- **클랜 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [클랜 조회]								  | ⬜        |
| [클랜원 목록 조회]		                 | ⬜        |
| [클랜원 정보 조회]		                 | ⬜        |


- **이벤트 및 공지사항 기능**
 
| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [이벤트 조회]								 | ⬜        |
| [공지사항 조회]								 | ⬜        |


- **퀘스트 및 도전과제 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [퀘스트 조회]								 | ⬜        |
| [도전과제 조회]								 | ⬜        |

- **천국 은행 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [썬칩 금메달 교환]								 | ⬜        |

- **수령 기능**
 
| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [일반 수령]								      | ⬜        |
| [가챠 수령]									| ⬜        |

- **사용자 기능**

| 기능                                         | 완료 여부 |
| -------------------------------------------- | --------- |
| [내 정보 조회]		                 | ⬜        |
| [대표 캐릭터 변경]						 | ⬜        |
| [칭호 변경]					        	 | ⬜        |
| [사용자 조회]		                 | ⬜        |


- **상점 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [보석 패키지 구매]								  | ⬜        |
| [메달 패키지 구매]								  | ⬜        |
| [현금 패키지 구매]								  | ⬜        |
| [푸드 변환]								  | ⬜        |
| [푸드 기어 변환]								  | ⬜        |

- 게임 데이터 로드**


## 하이브 로그인
(LoginHive)

**컨텐츠 설명**
- 하이브에 로그인 하여 고유번호와 토큰을 받습니다.

**로직**
1. 클라이언트가 이메일과 비밀번호를 하이브 서버에 전달한다.
1. 클라이언트의 고유번호와 생성된 토큰을 응답한다. 


클라이언트 → 서버 전송 데이터

| 종류                  | 설명                             |
| --------------------- | -------------------------------- |
| 이메일               | 로그인 이메일 |
| 비밀번호             | 로그인 비밀번호 |


#### 요청 및 응답 예시

- 요청 예시

```
POST http://localhost:11502/createhiveaccount
Content-Type: application/json

{
    "Email" : "example@test.com",
    "Password" : "Aslj3kldiu!",
}
```

- 응답 예시

```
{
    "result": 0,
    "playerId": 7,
    "token": "efaee4517404318a8d14f6053767ff74dcf9aw30910b9116dafd3fa4ce408a45"
}
```

---


## 토큰 검증

**컨텐츠 설명**
- 고유번호와 토큰이 유효한지 확인합니다.

**로직**
1. 클라이언트가 고유번호와 토큰을 전달한다.
1. 고유번호를 토큰화 하여 가지고 있는 토큰과 일치하는지 응답한다.


클라이언트 → 서버 전송 데이터

| 종류                  | 설명                             |
| --------------------- | -------------------------------- |
| 고유번호               | 로그인시 받은 playerId |
| 토큰                  | 로그인시 받은 token |


#### 요청 및 응답 예시

- 요청 예시

```
POST http://localhost:11502/verifytoken
Content-Type: application/json

{
    "PlayerId" : 58347,
    "Token" : "efaee4517404318a8d14f6053767ff74dcf9aw30910b9116dafd3fa4ce408a45!"
}
```

- 응답 예시

```
{
    "result": 0
}
```

---

## 로그인

**컨텐츠 설명**
- 하이브에서 얻은 고유번호와 토큰을 가지고 게임서버에 로그인 합니다.

**로직**
1. 고유번호와 토큰, 앱 버전, 마스터 데이터 버전을 게임 서버에 전달.
1. 앱 버전과 마스터 데이터 버전 검증
1. 게임 서버가 고유번호와 토큰을 하이브 서버에 검증.
1. 게임 서버가 Redis에 토큰 저장
1. 게임 데이터 로드 (게임 데이터 정의 후 추가 예정)
1. 최근 로그인 시간 갱신

클라이언트 → 서버 전송 데이터

| 종류                  | 설명                             |
| --------------------- | -------------------------------- |
| 고유번호               | Hive 로그인시 받은 playerId |
| 토큰                  | Hive 로그인시 받은 token |
| 앱 버전 정보        | 버전 |
| 게임 데이터 정보     | 버전 |


#### 요청 및 응답 예시

- 요청 예시

```
POST http://localhost:11500/verifytoken
Content-Type: application/json

{
    "PlayerId" : 58347,
    "Token" : "efaee4517404318a8d14f6053767ff74dcf9aw30910b9116dafd3fa4ce408a45!",
    "AppVersion" : "0.1",
    "MasterDataVersion" : "0.1"
}
```

- 응답 예시

게임 데이터 정의 완료 후 추가 예정

---

## 로그아웃

**컨텐츠 설명**
- redis에 저장된 토큰을 지웁니다.

**로직**
1. 고유번호와 토큰, 앱 버전, 마스터 데이터 버전을 게임 서버에 전달.
1. 앱 버전과 마스터 데이터 버전 검증
1. 게임 서버가 고유번호와 토큰을 하이브 서버에 검증.
1. 게임 서버가 Redis에서 토큰 삭제

클라이언트 → 서버 전송 데이터

| 종류                  | 설명                             |
| --------------------- | -------------------------------- |
| 고유번호               | Hive 로그인시 받은 playerId |
| 토큰                  | Hive 로그인시 받은 token |
| 앱 버전 정보        | 버전 |
| 게임 데이터 정보     | 버전 |


#### 요청 및 응답 예시

- 요청 예시

```
POST http://localhost:11500/verifytoken
Content-Type: application/json

{
    "PlayerId" : 58347,
    "Token" : "efaee4517404318a8d14f6053767ff74dcf9aw30910b9116dafd3fa4ce408a45!",
    "AppVersion" : "0.1",
    "MasterDataVersion" : "0.1"
}
```

- 응답 예시


```
{
    "result": 0
}
```

---
##