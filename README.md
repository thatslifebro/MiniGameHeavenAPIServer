# 미니게임천국 API 서버


# TODO-LIST

완료한 작업 : ✅

- **하이브 서버 기능**
 
| 기능                                         | 완료 여부 |
| -------------------------------------------- | --------- |
| [하이브 로그인](#하이브-로그인)				 | ⬜        |
| [토큰 검증](#하이브-로그인)					 | ⬜        |

- **계정 기능**

| 기능                                         | 완료 여부 |
| -------------------------------------------- | --------- |
| [로그인](#로그인)		              | ⬜        |
| [유저 등록]								 | ⬜        |
| [게임 데이터 로드]						 | ⬜        |
| [로그아웃]								 | ⬜        |

- **사용자 기능**

| 기능                                         | 완료 여부 |
| -------------------------------------------- | --------- |
| [내 정보 조회]		                 | ⬜        |
| [대표 캐릭터 변경]						 | ⬜        |
| [칭호 변경]					        	 | ⬜        |
| [사용자 조회]		                 | ⬜        |

- **출석 기능**

| 기능                              | 완료 여부 |
| --------------------------------- | --------- |
| [출석 정보 조회]					| ⬜        |
| [출석 체크]						| ⬜        |

- **우편 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [우편함 조회]								 | ⬜        |
| [우편 아이템 수령]           | ⬜        |
| 우편 삭제                                       | ⬜        |

- **이벤트 및 공지사항 기능**
 
| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [이벤트 조회]								 | ⬜        |
| [공지사항 조회]								 | ⬜        |

- **채팅 기능**

채팅 서버를 소켓 서버로 따로 두는 것이 좋을 것 같다.

- **퀘스트 및 도전과제 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [퀘스트 조회]								 | ⬜        |
| [도전과제 조회]								 | ⬜        |

- **천국 은행 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [썬칩 금메달 교환]								 | ⬜        |

- **보상 기능**
 
| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [일반 보상 수령]								      | ⬜        |
| [가챠 보상 수령]									| ⬜        |


- **상점 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [보석 패키지 구매]								  | ⬜        |
| [메달 패키지 구매]								  | ⬜        |
| [현금 패키지 구매]								  | ⬜        |
| [푸드 변환]								  | ⬜        |
| [푸드 기어 변환]								  | ⬜        |


- **캐릭터 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [캐릭터 조회]								  | ⬜        |
| [캐릭터 상세 조회]						      | ⬜        |
| [코스튬 조회]								  | ⬜        |
| [캐릭터 코스튬 변경]								  | ⬜        |
| [캐릭터 스킨 변경]						      | ⬜        |

- **게임 기능**
 
| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [보유 게임 조회]								  | ⬜        |
| [게임별 정보 조회]					          | ⬜        |
| [게임 결과 저장]								  | ⬜        |
| [전체 랭킹 조회]								  | ⬜        |

- **배틀 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [메달 배틀 정보 조회]					  | ⬜        |
| [메달 배틀 리그 랭킹]								  | ⬜        |
| [메달 배틀 전체 랭킹]								  | ⬜        |
| [클랜 배틀 정보 조회]							  | ⬜        |
| [클랜 배틀 랭킹]								  | ⬜        |
| [팀 배틀 정보 조회]					  | ⬜        |


- **클랜 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [클랜 조회]								  | ⬜        |
| [클랜원 목록 조회]		                 | ⬜        |
| [클랜원 정보 조회]		                 | ⬜        |


- **친구 기능**

| 기능                                            | 완료 여부 |
| ----------------------------------------------- | --------- |
| [친구 목록 조회]								  | ⬜        |
| [친구 정보 조회]								  | ⬜        |
| [친구 선물 보내기]								  | ⬜        |
| [친구 요청]								  | ⬜        |
| [친구 요청 조회]								  | ⬜        |
| [친구 요청 수락]								  | ⬜        |
| [친구 요청 거절]								  | ⬜        |
| [친구 삭제]								  | ⬜        |


## 하이브 로그인

**컨텐츠 설명**
- 하이브에 로그인 합니다.

**로직**
1. 아이디와 비밀번호를 하이브 서버에 전달.
2. 고유번호와 생성한 토큰을 응답한다. (jwt를 이용하면 유효시간관리 할 수 있고, 토큰안에 정보(고유번호)를 넣을 수 있다.)


## 토큰 검증

**컨텐츠 설명**
- 고유번호와 토큰이 유효한지 확인합니다.

**로직**
1. 토큰안에 정보인 고유번호가 같이 온 요청의 고유번호와 일치하는지 확인한다.
2. 토큰이 유효시간을 지났는지 확인한다.
3. 유효한 토큰이라면 기존 토큰을 새로운 토큰을 발급해 응답한다.
* 새로운 토큰을 다시 발급하는 이유

  : 토큰의 유효 기간동안 게임서버에 로그인을 요청했던 유저가 하이브 로그인을 반복하지 않도록 하기 위함.

  토큰의 유효기간은 3일(?)

  유효기간 이후 로그인하는 유저는 하이브 로그인을 진행.

  다른방법 ) 토큰을 게임서버 레디스에 저장하고 유효기간을 설정. 유효기간 내라면 그냥 로그인.

## 로그인

**컨텐츠 설명**
- 하이브 정보를 가지고 게임에 로그인 합니다.

**로직**
1. 고유번호와 토큰, 게임 버전, 마스터 데이터 버전을 게임 서버에 전달한다.
1. 게임 버전과 마스터 데이터 버전이 일치하는지 확인한다.
1. 게임 서버는 하이브 서버에 토큰 검증을 받는다.
1. 유효하다면 고유 번호를 통해 사용자의 정보를 조회한다.
1. 사용자 정보가 없다면 기본 정보를 생성한다.

##